{"version":3,"sources":["webpack:///src/app/create-modal/create-modal.component.html","webpack:///src/app/home/home.page.html","webpack:///src/app/create-modal/create-modal.component.scss","webpack:///src/app/create-modal/create-modal.component.ts","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["CreateModalComponent","modalCtrl","alertCtrl","nameInput","required","dateInput","durationInput","habitDate","Date","toISOString","habitTime","habit","description","today","minDate","setHour","maxDate","getFullYear","getMonth","getDate","dismiss","create","header","message","value","buttons","text","role","handler","name","date","duration","reminder","goal","val","inputs","type","placeholder","alert","present","toDate","newDate","selector","template","routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","entryComponents","HomePage","afAuth","db","navCtrl","router","dataService","items","successDays","uid","loading","started","authState","subscribe","user","collection","ref","query","orderBy","limit","snapshotChanges","colSnap","forEach","a","item","payload","doc","data","id","push","icon","daysLeft","countDays","chooseIcon","modal","onWillDismiss","then","res","now","nowUtc","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","randomColor","randomNumber","add","created","color","Number","docRef","daysNumber","i","ifDone","length","warning","min","Math","ceil","max","floor","number","random","days","startDate","endDate","completeHabit","r","goalAchieved","set","goalCounter","increment","FieldValue","counterRef","get","documentSnapshot","exists","taskCounter","habitCounter","update","setData","navigateByUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACWf,QAAaA,oBAAoB;AAO/B,oCAAoBC,SAApB,EAAwDC,SAAxD,EAAoF;AAAA;;AAAhE,aAAAD,SAAA,GAAAA,SAAA;AAAoC,aAAAC,SAAA,GAAAA,SAAA;AANxD,aAAAC,SAAA,GAAY,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWC,QAA/B,CAAZ;AACA,aAAAC,SAAA,GAAY,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWD,QAA/B,CAAZ;AACA,aAAAE,aAAA,GAAgB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWF,QAA/B,CAAhB;AACA,aAAAG,SAAA,GAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ;AACA,aAAAC,SAAA,GAAY,IAAIF,IAAJ,GAAWC,WAAX,EAAZ;AAIA,aAAAE,KAAA,GAAa,EAAb;AAFuF;;AAPxD;AAAA;AAAA,mCAcvB;AACN,eAAKD,SAAL,GAAiB,IAAjB;AACA,eAAKE,WAAL,GAAmB,EAAnB;AACA,cAAIC,KAAK,GAAG,IAAIL,IAAJ,EAAZ;AACA,eAAKM,OAAL,GAAe,KAAKC,OAAL,CAAaF,KAAb,CAAf;AACA,eAAKG,OAAL,GAAe,IAAIR,IAAJ,CAASK,KAAK,CAACI,WAAN,KAAsB,CAA/B,EAAkCJ,KAAK,CAACK,QAAN,EAAlC,EAAoDL,KAAK,CAACM,OAAN,EAApD,CAAf;AACA,eAAKH,OAAL,GAAe,IAAIR,IAAJ,CAAS,KAAKQ,OAAd,EAAuBP,WAAvB,EAAf;AACD;AArB8B;AAAA;AAAA,gCAuB1B;AACH,eAAKC,SAAL,GAAiB,IAAjB;AACD;AAzB8B;AAAA;AAAA,uCA2BnB;AACV,eAAKT,SAAL,CAAemB,OAAf,CAAuB,IAAvB,EAA6B,QAA7B;AACD;AA7B8B;AAAA;AAAA,+BA+BrB;;;;;;;;;;AACQ,2BAAM,KAAKlB,SAAL,CAAemB,MAAf,CAAsB;AACxCC,4BAAM,EAAE,gDADgC;AAExCC,6BAAO,sCAA0B,KAAKjB,aAAL,CAAmBkB,KAA7C,6EAFiC;AAGxCC,6BAAO,EAAE,CACT;AACEC,4BAAI,EAAE,oBADR;AAEEC,4BAAI,EAAE,QAFR;AAGEC,+BAAO,EAAE,mBAAM;AACb,+BAAI,CAACjB,KAAL,CAAWkB,IAAX,GAAkB,KAAI,CAAC1B,SAAL,CAAeqB,KAAjC;AACA,+BAAI,CAACb,KAAL,CAAWC,WAAX,GAAyB,KAAI,CAACA,WAA9B;AACA,+BAAI,CAACD,KAAL,CAAWmB,IAAX,GAAkB,KAAI,CAACvB,SAAvB;AACA,+BAAI,CAACI,KAAL,CAAWoB,QAAX,GAAsB,KAAI,CAACzB,aAAL,CAAmBkB,KAAzC;AACA,+BAAI,CAACb,KAAL,CAAWqB,QAAX,GAAsB,KAAI,CAACtB,SAA3B;AACA,+BAAI,CAACC,KAAL,CAAWsB,IAAX,GAAkB,CAAlB;;AACA,+BAAI,CAAChC,SAAL,CAAemB,OAAf,CAAuB,KAAI,CAACT,KAA5B;AACD;AAXH,uBADS,EAcT;AACEe,4BAAI,EAAE,YADR;AAEEE,+BAAO,EAAE,iBAACM,GAAD,EAAS;AAChB,+BAAI,CAACvB,KAAL,CAAWkB,IAAX,GAAkB,KAAI,CAAC1B,SAAL,CAAeqB,KAAjC;AACA,+BAAI,CAACb,KAAL,CAAWC,WAAX,GAAyB,KAAI,CAACA,WAA9B;AACA,+BAAI,CAACD,KAAL,CAAWmB,IAAX,GAAkB,KAAI,CAACvB,SAAvB;AACA,+BAAI,CAACI,KAAL,CAAWoB,QAAX,GAAsB,KAAI,CAACzB,aAAL,CAAmBkB,KAAzC;AACA,+BAAI,CAACb,KAAL,CAAWqB,QAAX,GAAsB,KAAI,CAACtB,SAA3B;AACA,+BAAI,CAACC,KAAL,CAAWsB,IAAX,GAAkBC,GAAG,CAACD,IAAtB;;AACA,+BAAI,CAAChC,SAAL,CAAemB,OAAf,CAAuB,KAAI,CAACT,KAA5B;AACD;AAVH,uBAdS,CAH+B;AA8BxCwB,4BAAM,EAAE,CACN;AACEN,4BAAI,EAAE,MADR;AAEEO,4BAAI,EAAE,QAFR;AAGEC,mCAAW,EAAE;AAHf,uBADM;AA9BgC,qBAAtB,CAAN;;;AAARC,yB;;AAsCC,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;;;;;AACR;AAvE4B;AAAA;AAAA,gCAyErBT,IAzEqB,EAyEjB;AACV,cAAIU,MAAM,GAAG,IAAIhC,IAAJ,CAASsB,IAAT,CAAb;AACA,cAAIW,OAAO,GAAG,0DAASD,MAAT,EAAiB,CAAjB,CAAd;AACAC,iBAAO,GAAG,4DAAWA,OAAX,EAAoB,CAApB,CAAV;AACAA,iBAAO,GAAG,4DAAWA,OAAX,EAAoB,CAApB,CAAV;AACA,iBAAOA,OAAO,CAAChC,WAAR,EAAP;AACD;AA/E4B;;AAAA;AAAA,OAAjC;;;;cAOiC;;cAAoC;;;;AAPxDT,wBAAoB,6DALhC,gEAAU;AACT0C,cAAQ,EAAE,kBADD;AAETC,cAAQ,EAAR;AAAA;AAAA,6GAFS;;;;AAAA,KAAV,CAKgC,GAApB3C,oBAAoB,CAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPb,QAAM4C,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAaC,qBAAqB;AAAA;AAAA,KAAlC;;AAAaA,yBAAqB,6DAJjC,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKb,QAAaI,cAAc;AAAA;AAAA,KAA3B;;AAAaA,kBAAc,6DAX1B,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,0DAJO,EAKP,0EALO,CADD;AAQRI,kBAAY,EAAE,CAAC,mDAAD,EAAW,yFAAX,CARN;AASRC,qBAAe,EAAE,CAAC,yFAAD;AATT,KAAT,CAW0B,GAAdF,cAAc,CAAd;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgBf,QAAaG,QAAQ;AAUnB,wBAAoBC,MAApB,EAAqDC,EAArD,EAAkFC,OAAlF,EAAkHC,MAAlH,EACUxD,SADV,EAC8CyD,WAD9C,EACgF1D,SADhF,EAC4G;AAAA;;AAAA;;AADxF,aAAAsD,MAAA,GAAAA,MAAA;AAAiC,aAAAC,EAAA,GAAAA,EAAA;AAA6B,aAAAC,OAAA,GAAAA,OAAA;AAAgC,aAAAC,MAAA,GAAAA,MAAA;AACxG,aAAAxD,SAAA,GAAAA,SAAA;AAAoC,aAAAyD,WAAA,GAAAA,WAAA;AAAkC,aAAA1D,SAAA,GAAAA,SAAA;AAVhF,aAAA2D,KAAA,GAAQ,EAAR;AACA,aAAAC,WAAA,GAAc,EAAd;AACA,aAAAC,GAAA,GAAM,EAAN;AACA,aAAAC,OAAA,GAAU,IAAV;AACA,aAAAC,OAAA,GAAU,KAAV;AAEA,aAAArD,KAAA,GAAa,EAAb;AAKI,aAAK4C,MAAL,CAAYU,SAAZ,CAAsBC,SAAtB,CAAgC,UAAAC,IAAI,EAAI;AACtC,cAAIA,IAAJ,EACE,MAAI,CAACL,GAAL,GAAWK,IAAI,CAACL,GAAhB;AACH,SAHD;AAIA,aAAKP,MAAL,CAAYU,SAAZ,CAAsBC,SAAtB,CAAgC,UAAAC,IAAI,EAAI;AACtC,cAAI,CAACA,IAAL,EACE;;AACF,gBAAI,CAACX,EAAL,CAAQY,UAAR,iBAA4B,MAAI,CAACN,GAAjC,qBAAsD,UAAAO,GAAG,EAAI;AAC3D,gBAAIC,KAAK,GAAGD,GAAG,CAACE,OAAJ,CAAY,SAAZ,CAAZ;AACAD,iBAAK,GAAGA,KAAK,CAACE,KAAN,CAAY,EAAZ,CAAR;AACA,mBAAOF,KAAP;AACD,WAJD,EAIGG,eAJH,GAIqBP,SAJrB,CAI+B,UAAAQ,OAAO,EAAI;AACxC,kBAAI,CAACd,KAAL,GAAa,EAAb;AACAc,mBAAO,CAACC,OAAR,CAAgB,UAAAC,CAAC,EAAI;AACnB,kBAAIC,IAAI,GAAGD,CAAC,CAACE,OAAF,CAAUC,GAAV,CAAcC,IAAd,EAAX;AACAH,kBAAI,CAAC,IAAD,CAAJ,GAAaD,CAAC,CAACE,OAAF,CAAUC,GAAV,CAAcE,EAA3B;;AACA,oBAAI,CAACrB,KAAL,CAAWsB,IAAX,CAAgBL,IAAhB;AACD,aAJD;AAKA,kBAAI,CAACd,OAAL,GAAe,KAAf;;AAPwC,uDAQxB,MAAI,CAACH,KARmB;AAAA;;AAAA;AAQxC,kEAA2B;AAAA,oBAAnBiB,IAAmB;AACzB,sBAAI,CAACb,OAAL,GAAe,KAAf;AACAa,oBAAI,CAACtD,OAAL,GAAe,EAAf;AACAsD,oBAAI,CAACM,IAAL,GAAY,wCAAZ;AACAN,oBAAI,CAACO,QAAL,GAAgB,MAAI,CAACC,SAAL,CAAeR,IAAI,CAAC/C,IAApB,EAA0B+C,IAAI,CAAC9C,QAA/B,EAAyC8C,IAAzC,CAAhB;;AACA,oBAAG,MAAI,CAACb,OAAR,EAAgB;AACd,sBAAGa,IAAI,CAACO,QAAL,IAAiB,CAApB,EAAsB;AACpBP,wBAAI,CAACtD,OAAL,GAAe,wBAAf;AACD;;AACD,sBAAGsD,IAAI,CAACO,QAAL,IAAiB,CAApB,EAAsB;AACpBP,wBAAI,CAACtD,OAAL,aAAkBsD,IAAI,CAACO,QAAvB;AACD;;AACD,sBAAGP,IAAI,CAACO,QAAL,GAAgB,CAAnB,EAAqB;AACnBP,wBAAI,CAACtD,OAAL,aAAkBsD,IAAI,CAACO,QAAvB;AACD;;AACDP,sBAAI,CAACM,IAAL,GAAY,MAAI,CAACG,UAAL,CAAgBT,IAAI,CAACO,QAArB,EAA+BP,IAAI,CAAC9C,QAApC,CAAZ;AACD,iBAXD,MAYI;AACF,sBAAG8C,IAAI,CAACO,QAAL,IAAiB,CAApB,EAAsB;AACpBP,wBAAI,CAACtD,OAAL,aAAkBsD,IAAI,CAACO,QAAvB;AACD,mBAFD,MAGI;AACFP,wBAAI,CAACtD,OAAL,aAAkBsD,IAAI,CAACO,QAAvB;AACD;AACF;AACF;AAjCuC;AAAA;AAAA;AAAA;AAAA;AAkCzC,WAtCD;AAuCD,SA1CD;AA2CD;;AA3DgB;AAAA;AAAA,mCA6DT,CACP;AA9DgB;AAAA;AAAA,oCAgEF;;;;;;;;;;AACC,2BAAM,KAAKnF,SAAL,CAAeoB,MAAf,CAAsB;AACxCyB,+BAAS,EAAE;AAD6B,qBAAtB,CAAN;;;AAARyC,yB;;AAIU,2BAAM,KAAKrF,SAAL,CAAemB,MAAf,CAAsB;AACxCC,4BAAM,EAAE,QADgC;AAExCC,6BAAO,EAAE,6BAF+B;AAGxCE,6BAAO,EAAE,CAAC,SAAD;AAH+B,qBAAtB,CAAN;;;AAARa,yB;;AAMR,2BAAMiD,KAAK,CAAChD,OAAN,EAAN;;;;AAEA,2BAAMgD,KAAK,CAACC,aAAN,GAAsBC,IAAtB,CAA2B,UAAMC,GAAN;AAAA,6BAAa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCACzCA,GAAG,CAACV,IAAJ,IAAY,IAD6B;AAAA;AAAA;AAAA;;AAE1C,qCAAKrE,KAAL,GAAa+E,GAAG,CAACV,IAAjB;AAEIW,mCAJsC,GAIhC,IAAInF,IAAJ,EAJgC;AAKtCoF,sCALsC,GAK7B,IAAIpF,IAAJ,CAASA,IAAI,CAACqF,GAAL,CAASF,GAAG,CAACG,cAAJ,EAAT,EAA+BH,GAAG,CAACI,WAAJ,EAA/B,EAAkDJ,GAAG,CAACK,UAAJ,EAAlD,EAAoEL,GAAG,CAACM,WAAJ,EAApE,EACtBN,GAAG,CAACO,aAAJ,EADsB,EACDP,GAAG,CAACQ,aAAJ,EADC,CAAT,CAL6B;AAO1C,qCAAKC,WAAL,GAAmB,KAAKC,YAAL,EAAnB;AAEA,qCAAK7C,EAAL,CAAQY,UAAR,iBAA4B,KAAKN,GAAjC,qBAAsDwC,GAAtD,CAA0D;AACxDzE,sCAAI,EAAE,KAAKlB,KAAL,CAAWkB,IADuC;AAExDjB,6CAAW,EAAE,KAAKD,KAAL,CAAWC,WAFgC;AAGxD2F,yCAAO,EAAEX,MAH+C;AAIxDY,uCAAK,EAAE,KAAKJ,WAJ4C;AAKxDtE,sCAAI,EAAE,KAAKnB,KAAL,CAAWmB,IALuC;AAMxDC,0CAAQ,EAAE0E,MAAM,CAAC,KAAK9F,KAAL,CAAWoB,QAAZ,CANwC;AAOxDC,0CAAQ,EAAE,KAAKrB,KAAL,CAAWqB,QAPmC;AAQxDC,sCAAI,EAAEwE,MAAM,CAAC,KAAK9F,KAAL,CAAWsB,IAAZ,CAR4C;AASxD4B,6CAAW,EAAE;AAT2C,iCAA1D,EAUG4B,IAVH,CAUQ,UAAAiB,MAAM,EAAI;AAChB,sCAAInG,SAAS,GAAG,IAAIC,IAAJ,CAAS,MAAI,CAACG,KAAL,CAAWmB,IAApB,CAAhB;AACA,sCAAI6E,UAAU,GAAGF,MAAM,CAAC,MAAI,CAAC9F,KAAL,CAAWoB,QAAZ,CAAN,GAA4B,CAA7C;;AACA,uCAAI,IAAI6E,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGD,UAAnB,EAA+BC,CAAC,EAAhC,EAAmC;AACjC,wCAAI9E,IAAI,GAAI,IAAItB,IAAJ,CAASD,SAAS,CAACU,WAAV,EAAT,EAAiCV,SAAS,CAACW,QAAV,EAAjC,EAAsDX,SAAS,CAACY,OAAV,KAAoByF,CAA1E,EAA6EnG,WAA7E,EAAZ;;AACA,0CAAI,CAAC+C,EAAL,CAAQY,UAAR,iBAA4B,MAAI,CAACN,GAAjC,4BAAsD4C,MAAM,CAACzB,EAA7D,YAAwEqB,GAAxE,CAA4E;AAC1ExE,0CAAI,EAAEA,IADoE;AAE1E+E,4CAAM,EAAE;AAFkE,qCAA5E;AAID;AACF,iCApBD;;AAsBA,oCAAI,KAAKjD,KAAL,CAAWkD,MAAX,IAAqB,EAAzB,EAA4B;AAC1B,uCAAK5G,SAAL,CAAemB,MAAf,CAAsB;AACpBC,0CAAM,EAAE,8BADY;AAEpBC,2CAAO,EAAE,kCAFW;AAGpBE,2CAAO,EAAE,CAAC,IAAD;AAHW,mCAAtB,EAIGgE,IAJH,CAIQ,UAAAsB,OAAO,EAAI;AACjBA,2CAAO,CAACxE,OAAR;AACD,mCAND;AAOD;;AAvCyC,sCAyCrC,KAAKqB,KAAL,CAAWkD,MAAX,GAAoB,EAzCiB;AAAA;AAAA;AAAA;;AAAA;AA0CtC,uCAAMxE,KAAK,CAACC,OAAN,EAAN;;AA1CsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAb;AAAA,qBAA3B,CAAN;;;;;;;;;AA8CD;AA3HgB;AAAA;AAAA,uCA8HL;AACV,cAAMyE,GAAG,GAAGC,IAAI,CAACC,IAAL,CAAU,CAAV,CAAZ;AACA,cAAMC,GAAG,GAAGF,IAAI,CAACG,KAAL,CAAW,CAAX,CAAZ;AACA,cAAIC,MAAM,GAAIJ,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACK,MAAL,MAAiBH,GAAG,GAAGH,GAAN,GAAY,CAA7B,CAAX,IAA8CA,GAA5D;;AACA,kBAAQK,MAAR;AACE,iBAAK,CAAL;AACE,qBAAO,SAAP;;AACF,iBAAK,CAAL;AACE,qBAAO,WAAP;;AACF,iBAAK,CAAL;AACE,qBAAO,UAAP;;AACF,iBAAK,CAAL;AACE,qBAAO,SAAP;;AACF,iBAAK,CAAL;AACE,qBAAO,SAAP;AAVJ;AAYD;AA9IgB;AAAA;AAAA,kCAgJPvF,IAhJO,EAgJDyF,IAhJC,EAgJK1C,IAhJL,EAgJS;AACxB,cAAIhE,KAAK,GAAG,IAAIL,IAAJ,EAAZ;AACAK,eAAK,GAAG,IAAIL,IAAJ,CAAS,yDAAQK,KAAR,CAAT,EAAwBA,KAAK,CAACK,QAAN,EAAxB,EAAyCL,KAAK,CAACM,OAAN,EAAzC,CAAR;AACAW,cAAI,GAAG,IAAItB,IAAJ,CAASsB,IAAT,CAAP;AACA,cAAI0F,SAAS,GAAG,IAAIhH,IAAJ,CAAS,yDAAQsB,IAAR,CAAT,EAAuBA,IAAI,CAACZ,QAAL,EAAvB,EAAuCY,IAAI,CAACX,OAAL,EAAvC,CAAhB;AACA,cAAIsG,OAAO,GAAG,yDAAQD,SAAR,EAAoBD,IAAI,GAAC,CAAzB,CAAd;;AACA,cAAG,2DAAUC,SAAV,EAAqB3G,KAArB,CAAH,EAA+B;AAC7B,iBAAKmD,OAAL,GAAe,IAAf;AACA,mBAAQuD,IAAI,GAAC,CAAb;AACD;;AACD,cAAI,4DAAW1G,KAAX,EAAkB2G,SAAlB,KAAgC,CAAhC,IAAsC,4DAAW3G,KAAX,EAAkB4G,OAAlB,MAA+B,CAAtE,IAA6E,2DAAUA,OAAV,EAAmB5G,KAAnB,CAAhF,EAA2G;AACzG,iBAAKmD,OAAL,GAAe,IAAf;AACA,mBAAO,kEAAiByD,OAAjB,EAA0B5G,KAA1B,CAAP;AACD;;AACD,cAAG,4DAAW2G,SAAX,EAAsB3G,KAAtB,KAAgC,CAAnC,EAAqC;AACjC,mBAAO,kEAAiB2G,SAAjB,EAA4B3G,KAA5B,CAAP;AACH;;AACD,cAAG,4DAAWA,KAAX,EAAkB4G,OAAlB,KAA8B,CAAjC,EAAmC;AACjC,iBAAKC,aAAL,CAAmB7C,IAAnB;AACD;AACF;AApKgB;AAAA;AAAA,mCAsKNO,QAtKM,EAsKIrD,QAtKJ,EAsKY;AAC3B,cAAGA,QAAQ,IAAE,CAAb,EAAe;AACb,gBAAM4F,CAAC,GAAGvC,QAAQ,GAAC,CAAnB;AACA,8DAA2CuC,CAA3C;AACD;;AACD,cAAG5F,QAAQ,IAAE,EAAb,EAAgB;AACd,gBAAGqD,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAAjC,EAAoC;AAAC,qBAAO,wCAAP;AAAiD;;AACtF,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAAjC,EAAoC;AAAC,qBAAO,wCAAP;AAAiD;;AACtF,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAAhC,EAAkC;AAAC,qBAAO,wCAAP;AAAiD;;AACpF,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAAhC,EAAkC;AAAC,qBAAO,wCAAP;AAAiD;;AACpF,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAAhC,EAAkC;AAAC,qBAAO,wCAAP;AAAiD;;AACpF,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAAhC,EAAkC;AAAC,qBAAO,wCAAP;AAAiD;;AACpF,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAAhC,EAAkC;AAAC,qBAAO,wCAAP;AAAiD;AACrF;;AACD,cAAGrD,QAAQ,IAAE,EAAb,EAAgB;AACd,gBAAGqD,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAnD,EAAsD;AAAC,qBAAO,wCAAP;AAAiD;;AACxG,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAnD,EAAsD;AAAC,qBAAO,wCAAP;AAAiD;;AACxG,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAnD,EAAsD;AAAC,qBAAO,wCAAP;AAAiD;;AACxG,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,CAAnD,EAAqD;AAAC,qBAAO,wCAAP;AAAiD;;AACvG,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA7B,IAAkCA,QAAQ,IAAI,CAAjD,EAAmD;AAAC,qBAAO,wCAAP;AAAiD;;AACrG,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA7B,IAAkCA,QAAQ,IAAI,CAAjD,EAAmD;AAAC,qBAAO,wCAAP;AAAiD;;AACrG,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA7B,IAAkCA,QAAQ,IAAI,CAAjD,EAAmD;AAAC,qBAAO,wCAAP;AAAiD;AACtG;;AACD,cAAGrD,QAAQ,IAAE,EAAb,EAAgB;AACd,gBAAGqD,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAhD,IAAsDA,QAAQ,IAAI,EAArE,EAAwE;AAAC,qBAAO,wCAAP;AAAiD;;AAC1H,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAhD,IAAsDA,QAAQ,IAAI,EAArE,EAAwE;AAAC,qBAAO,wCAAP;AAAiD;;AAC1H,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAhD,IAAsDA,QAAQ,IAAI,EAArE,EAAwE;AAAC,qBAAO,wCAAP;AAAiD;;AAC1H,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,EAAhD,IAAsDA,QAAQ,IAAI,EAArE,EAAwE;AAAC,qBAAO,wCAAP;AAAiD;;AAC1H,gBAAGA,QAAQ,IAAI,EAAZ,IAAkBA,QAAQ,IAAI,EAA9B,IAAoCA,QAAQ,IAAI,CAAhD,IAAqDA,QAAQ,IAAI,CAApE,EAAsE;AAAC,qBAAO,wCAAP;AAAiD;;AACxH,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA7B,IAAkCA,QAAQ,IAAI,CAA9C,IAAmDA,QAAQ,IAAI,CAAlE,EAAoE;AAAC,qBAAO,wCAAP;AAAiD;;AACtH,gBAAGA,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA7B,IAAkCA,QAAQ,IAAI,CAA9C,IAAmDA,QAAQ,IAAI,CAAlE,EAAoE;AAAC,qBAAO,wCAAP;AAAiD;AACvH;AACF;AAtMgB;AAAA;AAAA,sCAwMHP,IAxMG,EAwMC;AAChB,cAAI+C,YAAY,GAAG,KAAnB;AACA,eAAKpE,EAAL,CAAQuB,GAAR,iBAAqB,KAAKjB,GAA1B,4BAA+Ce,IAAI,CAACI,EAApD;AACA,cAAIA,EAAE,GAAGJ,IAAI,CAACI,EAAd;AACA,eAAKzB,EAAL,CAAQuB,GAAR,iBAAqB,KAAKjB,GAA1B,6BAAgDmB,EAAhD,GAAsD4C,GAAtD,CAA0DhD,IAA1D;;AACA,cAAGA,IAAI,CAAChB,WAAL,IAAoBgB,IAAI,CAAC5C,IAA5B,EAAiC;AAC/B2F,wBAAY,GAAG,IAAf;AACD;;AACD,cAAIE,WAAJ;;AACA,cAAGF,YAAH,EAAgB;AACdE,uBAAW,GAAG,CAAd;AACD,WAFD,MAGI;AAACA,uBAAW,GAAG,CAAd;AAAgB;;AACrB,cAAMC,SAAS,GAAG,mDAAmBC,UAAnB,CAA8BD,SAA9B,CAAwC,CAAxC,CAAlB;AACA,cAAME,UAAU,GAAG,KAAKzE,EAAL,CAAQY,UAAR,CAAmB,OAAnB,EAA4BW,GAA5B,WAAmC,KAAKjB,GAAxC,GAA+CM,UAA/C,CAA0D,UAA1D,EAAsEW,GAAtE,CAA0E,SAA1E,CAAnB;AACA,eAAKvB,EAAL,CAAQY,UAAR,CAAmB,OAAnB,EAA4BW,GAA5B,WAAmC,KAAKjB,GAAxC,GAA+CM,UAA/C,CAA0D,UAA1D,EAAsEW,GAAtE,CAA0E,SAA1E,EAAqFV,GAArF,CAAyF6D,GAAzF,GAA+FzC,IAA/F,CAAoG,UAAC0C,gBAAD,EAAsB;AACxH,gBAAG,CAACA,gBAAgB,CAACC,MAArB,EAA4B;AAC1BH,wBAAU,CAACJ,GAAX,CACA;AAAEQ,2BAAW,EAAE,CAAf;AACEC,4BAAY,EAAE,CADhB;AAEER,2BAAW,EAAEA;AAFf,eADA;AAKD,aAND,MAOI;AACF,kBAAGF,YAAH,EAAgB;AACdK,0BAAU,CAACM,MAAX,CACE;AAAED,8BAAY,EAAEP,SAAhB;AACED,6BAAW,EAAEC;AADf,iBADF;AAID,eALD,MAMI;AACFE,0BAAU,CAACM,MAAX,CAAkB;AAAED,8BAAY,EAAEP;AAAhB,iBAAlB;AACD;AACF;AACF,WAnBD;AAoBA,iBAAOlD,IAAI,CAACI,EAAZ;AACD;AA5OgB;AAAA;AAAA,iCA8ORA,EA9OQ,EA8OJJ,IA9OI,EA8OE;AACjB,eAAKlB,WAAL,CAAiB6E,OAAjB,CAAyBvD,EAAzB,EAA6BJ,IAA7B;AACA,eAAKnB,MAAL,CAAY+E,aAAZ,mBAAqCxD,EAArC;AACD;AAjPgB;;AAAA;AAAA,OAArB;;;;cAU8B;;cAA6B;;cAAkC;;cAA+B;;cACrG;;cAAsC;;cAAgC;;;;AAXhF3B,YAAQ,6DALpB,gEAAU;AACTZ,cAAQ,EAAE,UADD;AAETC,cAAQ,EAAR;AAAA;AAAA,wFAFS;;;;AAAA,KAAV,CAKoB,GAARW,QAAQ,CAAR","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"medium\\\">\\r\\n    <ion-title>utwórz nowy nawyk</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"dismissModal()\\\"><ion-icon name=\\\"arrow-back-outline\\\" style=\\\"zoom:1.5\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">nazwa</ion-label>\\r\\n    <ion-input [formControl]=\\\"nameInput\\\" type=\\\"text\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">opis</ion-label>\\r\\n    <ion-input type=\\\"text\\\" placeholder=\\\"nad czym będziesz pracować?\\\" [(ngModel)]=\\\"description\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label>data rozpoczęcia</ion-label>\\r\\n    <ion-datetime [formControl]=\\\"dateInput\\\" displayFormat=\\\"DD/MM/YYYY\\\" min={{minDate}} max={{maxDate}} [(ngModel)]=\\\"habitDate\\\"\\r\\n    cancelText=\\\"anuluj\\\" doneText=\\\"zapisz\\\"></ion-datetime>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label>czas trwania</ion-label>\\r\\n    <ion-select [formControl]=\\\"durationInput\\\" placeholder=\\\"wybierz\\\" okText=\\\"zapisz\\\" cancelText=\\\"anuluj\\\">\\r\\n      <ion-select-option value=\\\"7\\\">7 dni</ion-select-option>\\r\\n      <ion-select-option value=\\\"14\\\">14 dni</ion-select-option>\\r\\n      <ion-select-option value=\\\"21\\\">21 dni</ion-select-option>\\r\\n      <ion-select-option value=\\\"28\\\">28 dni</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label>przypomnienie</ion-label>\\r\\n    <ion-datetime displayFormat=\\\"H:mm\\\" [(ngModel)]=\\\"habitTime\\\" placeholder=\\\"godzina powiadomienia\\\" cancelText=\\\"anuluj\\\" doneText=\\\"zapisz\\\" (ionCancel)=\\\"clear()\\\"></ion-datetime>\\r\\n  </ion-item>\\r\\n  <ion-button [disabled]=\\\"nameInput.invalid || dateInput.invalid || durationInput.invalid\\\" expand=\\\"block\\\" (click)=\\\"save()\\\" class=\\\"ion-margin-top\\\">zapisz</ion-button>\\r\\n</ion-content>\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"medium\\\">\\r\\n    <ion-title>trwające nawyki ({{items.length}})</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button menu=\\\"main-menu\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"openModal()\\\"><ion-icon name=\\\"add\\\" style=\\\"zoom:2.0\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-spinner *ngIf = \\\"loading\\\" color=\\\"success\\\"></ion-spinner>\\r\\n  \\r\\n  <ion-card *ngFor=\\\"let item of items\\\" color={{item.color}}>\\r\\n    <ion-item (click)=\\\"onSelect(item.id, item)\\\" detail=\\\"true\\\" lines=\\\"none\\\">\\r\\n      <ion-label>{{item.name}}</ion-label>   \\r\\n    </ion-item>\\r\\n  \\r\\n    <ion-card-content>\\r\\n        <p class=\\\"desc\\\">{{item.description}}</p>\\r\\n        <p>nawyk trwający {{item.duration}} dni</p>\\r\\n        <p>{{item.message}}</p>\\r\\n    </ion-card-content>\\r\\n\\r\\n        <ion-icon class=\\\"progress-icon\\\" src={{item.icon}}></ion-icon>\\r\\n\\r\\n  </ion-card>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NyZWF0ZS1tb2RhbC9jcmVhdGUtbW9kYWwuY29tcG9uZW50LnNjc3MifQ== */\";","import { ModalController } from '@ionic/angular';\r\nimport { Component, OnInit} from '@angular/core';\r\nimport { FormControl, Validators } from '@angular/forms';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { setHours, setMinutes, setSeconds } from 'date-fns';\r\n\r\n@Component({\r\n  selector: 'app-create-modal',\r\n  templateUrl: './create-modal.component.html',\r\n  styleUrls: ['./create-modal.component.scss'],\r\n})\r\nexport class CreateModalComponent implements OnInit{\r\n  nameInput = new FormControl('', Validators.required);\r\n  dateInput = new FormControl('', Validators.required);\r\n  durationInput = new FormControl('', Validators.required);\r\n  habitDate = new Date().toISOString();\r\n  habitTime = new Date().toISOString();\r\n\r\n  constructor(private modalCtrl: ModalController, private alertCtrl: AlertController) { }\r\n\r\n  habit: any = {};\r\n  description: string;\r\n  maxDate;\r\n  minDate;\r\n\r\n  ngOnInit(){\r\n    this.habitTime = null;\r\n    this.description = '';\r\n    let today = new Date();\r\n    this.minDate = this.setHour(today);\r\n    this.maxDate = new Date(today.getFullYear() + 2, today.getMonth(), today.getDate());\r\n    this.maxDate = new Date(this.maxDate).toISOString();\r\n  }\r\n\r\n  clear(){\r\n    this.habitTime = null;\r\n  }\r\n\r\n  dismissModal(){\r\n    this.modalCtrl.dismiss(null, 'cancel');\r\n  }\r\n\r\n  async save(){\r\n      const alert = await this.alertCtrl.create({\r\n        header: 'czy chcesz wyznaczyć sobie cel do osiągnięcia?',\r\n        message: `wybierz liczbę dni z ${this.durationInput.value}, w których będziesz trzymać się swojego postanowienia`,\r\n        buttons: [\r\n        {\r\n          text: 'nie wyznaczam celu',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            this.habit.name = this.nameInput.value;\r\n            this.habit.description = this.description;\r\n            this.habit.date = this.habitDate;\r\n            this.habit.duration = this.durationInput.value;\r\n            this.habit.reminder = this.habitTime;\r\n            this.habit.goal = 0;\r\n            this.modalCtrl.dismiss(this.habit);\r\n          }\r\n        },\r\n        {\r\n          text: 'zapisz cel',\r\n          handler: (val) => {\r\n            this.habit.name = this.nameInput.value;\r\n            this.habit.description = this.description;\r\n            this.habit.date = this.habitDate;\r\n            this.habit.duration = this.durationInput.value;\r\n            this.habit.reminder = this.habitTime;\r\n            this.habit.goal = val.goal;\r\n            this.modalCtrl.dismiss(this.habit);\r\n          }\r\n        }\r\n        ],\r\n        inputs: [\r\n          {\r\n            name: 'goal',\r\n            type: 'number',\r\n            placeholder: 'liczba dni'\r\n          }\r\n        ]\r\n      });\r\n      return await alert.present();\r\n    }\r\n\r\n    setHour(date){\r\n      let toDate = new Date(date);\r\n      let newDate = setHours(toDate, 0);\r\n      newDate = setMinutes(newDate, 0);\r\n      newDate = setSeconds(newDate, 0);\r\n      return newDate.toISOString();\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { CreateModalComponent } from './../create-modal/create-modal.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HomePage } from './home.page';\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule\r\n  ],\r\n  declarations: [HomePage, CreateModalComponent],\r\n  entryComponents: [CreateModalComponent]\r\n})\r\nexport class HomePageModule {}\r\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-spinner {\\n  margin-left: 16px;\\n  margin-top: 16px;\\n}\\n\\nion-card {\\n  padding: 16px;\\n  border-radius: 15px 15px 15px 15px;\\n}\\n\\nion-item {\\n  border-radius: 15px 15px 15px 15px;\\n  opacity: 0.85;\\n  font-size: 18px;\\n}\\n\\np {\\n  font-size: 15px;\\n}\\n\\n.desc {\\n  font-size: 18px;\\n  color: #696969;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXE1LXFxEZXNrdG9wXFxwcm9qZWt0XFxIYWJpdFRyYWNrZXIvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFFQSxrQkFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsUUFBQTtFQUNBLDJCQUFBO0FDQUY7O0FER0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7QUNBRjs7QURHQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUVBLGNBQUE7RUFFQSxTQUFBO0FDRkY7O0FES0E7RUFDRSxxQkFBQTtBQ0ZGOztBREtBO0VBQ0UsaUJBQUE7RUFDQSxnQkFBQTtBQ0ZGOztBREtBO0VBQ0UsYUFBQTtFQUNBLGtDQUFBO0FDRkY7O0FES0E7RUFDRSxrQ0FBQTtFQUNBLGFBQUE7RUFDQSxlQUFBO0FDRkY7O0FES0E7RUFDRSxlQUFBO0FDRkY7O0FES0E7RUFDRSxlQUFBO0VBQ0EsY0FBQTtBQ0ZGIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgdG9wOiA1MCU7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xyXG59XHJcblxyXG4jY29udGFpbmVyIHN0cm9uZyB7XHJcbiAgZm9udC1zaXplOiAyMHB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xyXG59XHJcblxyXG4jY29udGFpbmVyIHAge1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBsaW5lLWhlaWdodDogMjJweDtcclxuXHJcbiAgY29sb3I6ICM4YzhjOGM7XHJcblxyXG4gIG1hcmdpbjogMDtcclxufVxyXG5cclxuI2NvbnRhaW5lciBhIHtcclxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbn1cclxuXHJcbmlvbi1zcGlubmVyIHtcclxuICBtYXJnaW4tbGVmdDogMTZweDtcclxuICBtYXJnaW4tdG9wOiAxNnB4O1xyXG59XHJcblxyXG5pb24tY2FyZHtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE1cHggMTVweCAxNXB4IDE1cHg7XHJcbn1cclxuXHJcbmlvbi1pdGVte1xyXG4gIGJvcmRlci1yYWRpdXM6IDE1cHggMTVweCAxNXB4IDE1cHg7XHJcbiAgb3BhY2l0eTogMC44NTtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbn1cclxuXHJcbnB7XHJcbiAgZm9udC1zaXplOiAxNXB4O1xyXG59XHJcblxyXG4uZGVzY3tcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgY29sb3I6ICM2OTY5Njk7XHJcbn0iLCIjY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xufVxuXG4jY29udGFpbmVyIHN0cm9uZyB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XG59XG5cbiNjb250YWluZXIgcCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDIycHg7XG4gIGNvbG9yOiAjOGM4YzhjO1xuICBtYXJnaW46IDA7XG59XG5cbiNjb250YWluZXIgYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbn1cblxuaW9uLXNwaW5uZXIge1xuICBtYXJnaW4tbGVmdDogMTZweDtcbiAgbWFyZ2luLXRvcDogMTZweDtcbn1cblxuaW9uLWNhcmQge1xuICBwYWRkaW5nOiAxNnB4O1xuICBib3JkZXItcmFkaXVzOiAxNXB4IDE1cHggMTVweCAxNXB4O1xufVxuXG5pb24taXRlbSB7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHggMTVweCAxNXB4IDE1cHg7XG4gIG9wYWNpdHk6IDAuODU7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxucCB7XG4gIGZvbnQtc2l6ZTogMTVweDtcbn1cblxuLmRlc2Mge1xuICBmb250LXNpemU6IDE4cHg7XG4gIGNvbG9yOiAjNjk2OTY5O1xufSJdfQ== */\";","import { CreateModalComponent } from './../create-modal/create-modal.component';\r\nimport { Component, OnInit} from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AlertController, ModalController } from '@ionic/angular';\r\nimport { NavController } from '@ionic/angular';\r\nimport { DataService } from '../data.service';\r\nimport { Router } from '@angular/router';\r\nimport { differenceInDays, isSameDay, compareAsc, addDays, setHours, setMinutes, setSeconds, getYear } from 'date-fns';\r\nimport * as firebase from 'firebase';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit{\r\n  items = [];\r\n  successDays = [];\r\n  uid = {};\r\n  loading = true;\r\n  started = false;\r\n  randomColor;\r\n  habit: any = {};\r\n\r\n\r\n  constructor(private afAuth: AngularFireAuth, private db: AngularFirestore, public navCtrl: NavController, private router: Router,\r\n    private alertCtrl: AlertController, private dataService: DataService, private modalCtrl: ModalController) { \r\n      this.afAuth.authState.subscribe(user => {\r\n        if (user)\r\n          this.uid = user.uid;\r\n      });\r\n      this.afAuth.authState.subscribe(user => {\r\n        if (!user)\r\n          return;\r\n        this.db.collection(`users/${this.uid}/ongoingHabits`, ref => {\r\n          let query = ref.orderBy('created');\r\n          query = query.limit(20);\r\n          return query;\r\n        }).snapshotChanges().subscribe(colSnap => {\r\n          this.items = [];\r\n          colSnap.forEach(a => {\r\n            let item = a.payload.doc.data();\r\n            item['id'] = a.payload.doc.id;\r\n            this.items.push(item);\r\n          });\r\n          this.loading = false;\r\n          for(let item of this.items){\r\n            this.started = false;\r\n            item.message = \"\";\r\n            item.icon = \"/assets/custom-ion-icons/progress7.svg\";\r\n            item.daysLeft = this.countDays(item.date, item.duration, item);\r\n            if(this.started){\r\n              if(item.daysLeft == 0){\r\n                item.message = \"nawyk kończy się dziś!\";\r\n              }\r\n              if(item.daysLeft == 1){\r\n                item.message = `${item.daysLeft} dzień do końca`;\r\n              }\r\n              if(item.daysLeft > 1){\r\n                item.message = `${item.daysLeft} dni do końca`;\r\n              }\r\n              item.icon = this.chooseIcon(item.daysLeft, item.duration);\r\n            }\r\n            else{\r\n              if(item.daysLeft == 1){\r\n                item.message = `${item.daysLeft} dzień do rozpoczęcia`;\r\n              }\r\n              else{\r\n                item.message = `${item.daysLeft} dni do rozpoczęcia`;\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ngOnInit(){\r\n    }\r\n  \r\n    async openModal(){\r\n      const modal = await this.modalCtrl.create({\r\n        component: CreateModalComponent\r\n      });\r\n\r\n        const alert = await this.alertCtrl.create({\r\n          header: 'super!',\r\n          message: 'nowy nawyk został utworzony',\r\n          buttons: ['zamknij']\r\n        });\r\n      \r\n      await modal.present();\r\n\r\n      await modal.onWillDismiss().then(async res => {\r\n        if(res.data != null){\r\n          this.habit = res.data;\r\n\r\n          let now = new Date();\r\n          let nowUtc = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), \r\n          now.getUTCMinutes(), now.getUTCSeconds()));\r\n          this.randomColor = this.randomNumber();\r\n  \r\n          this.db.collection(`users/${this.uid}/ongoingHabits`).add({\r\n            name: this.habit.name, \r\n            description: this.habit.description,\r\n            created: nowUtc,\r\n            color: this.randomColor,\r\n            date: this.habit.date,\r\n            duration: Number(this.habit.duration),\r\n            reminder: this.habit.reminder,\r\n            goal: Number(this.habit.goal),\r\n            successDays: 0 \r\n          }).then(docRef => {\r\n            let habitDate = new Date(this.habit.date);\r\n            let daysNumber = Number(this.habit.duration)+1;\r\n            for(let i = 1; i < daysNumber; i++){\r\n              let date =  new Date(habitDate.getFullYear(),habitDate.getMonth(),habitDate.getDate()+i).toISOString();\r\n              this.db.collection(`users/${this.uid}/ongoingHabits/${docRef.id}/days`).add({\r\n                date: date,\r\n                ifDone: false\r\n              })\r\n            }\r\n          });\r\n          \r\n          if (this.items.length >= 20){\r\n            this.alertCtrl.create({\r\n              header: 'to zbyt dużo nawyków na raz!',\r\n              message: 'wyświetlane jest do 20 elementów',\r\n              buttons: ['ok'],\r\n            }).then(warning => {\r\n              warning.present();\r\n            });\r\n          }\r\n\r\n            if(this.items.length < 20){\r\n              await alert.present(); \r\n            }\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    randomNumber(){\r\n      const min = Math.ceil(1);\r\n      const max = Math.floor(5);\r\n      let number =  Math.floor(Math.random() * (max - min + 1)) + min;\r\n      switch (number) {\r\n        case 1:\r\n          return \"primary\";\r\n        case 2:\r\n          return \"secondary\";\r\n        case 3:\r\n          return \"tertiary\";\r\n        case 4:\r\n          return \"success\";\r\n        case 5:\r\n          return \"warning\";\r\n      } \r\n    }\r\n\r\n    countDays(date, days, item){\r\n      let today = new Date();\r\n      today = new Date(getYear(today),today.getMonth(),today.getDate());\r\n      date = new Date(date);\r\n      let startDate = new Date(getYear(date),date.getMonth(),date.getDate());\r\n      let endDate = addDays(startDate, (days-1));\r\n      if(isSameDay(startDate, today)){\r\n        this.started = true;\r\n        return (days-1);\r\n      }\r\n      if((compareAsc(today, startDate) == 1 && (compareAsc(today, endDate) !== 1))|| (isSameDay(endDate, today))){\r\n        this.started = true;\r\n        return differenceInDays(endDate, today);\r\n      }\r\n      if(compareAsc(startDate, today) == 1){\r\n          return differenceInDays(startDate, today);\r\n      }\r\n      if(compareAsc(today, endDate) == 1){\r\n        this.completeHabit(item);\r\n      }\r\n    }\r\n\r\n    chooseIcon(daysLeft, duration){\r\n      if(duration==7){\r\n        const r = daysLeft%7; \r\n        return `/assets/custom-ion-icons/progress${r}.svg`;\r\n      }\r\n      if(duration==14){\r\n        if(daysLeft == 13 || daysLeft == 12){return \"/assets/custom-ion-icons/progress6.svg\";}\r\n        if(daysLeft == 11 || daysLeft == 10){return \"/assets/custom-ion-icons/progress5.svg\";}\r\n        if(daysLeft == 9 || daysLeft == 8){return \"/assets/custom-ion-icons/progress4.svg\";}\r\n        if(daysLeft == 7 || daysLeft == 6){return \"/assets/custom-ion-icons/progress3.svg\";}\r\n        if(daysLeft == 5 || daysLeft == 4){return \"/assets/custom-ion-icons/progress2.svg\";}\r\n        if(daysLeft == 3 || daysLeft == 2){return \"/assets/custom-ion-icons/progress1.svg\";}\r\n        if(daysLeft == 1 || daysLeft == 0){return \"/assets/custom-ion-icons/progress0.svg\";}\r\n      }\r\n      if(duration==21){\r\n        if(daysLeft == 20 || daysLeft == 19 || daysLeft == 18){return \"/assets/custom-ion-icons/progress6.svg\";}\r\n        if(daysLeft == 17 || daysLeft == 16 || daysLeft == 15){return \"/assets/custom-ion-icons/progress5.svg\";}\r\n        if(daysLeft == 14 || daysLeft == 13 || daysLeft == 12){return \"/assets/custom-ion-icons/progress4.svg\";}\r\n        if(daysLeft == 11 || daysLeft == 10 || daysLeft == 9){return \"/assets/custom-ion-icons/progress3.svg\";}\r\n        if(daysLeft == 8 || daysLeft == 7 || daysLeft == 6){return \"/assets/custom-ion-icons/progress2.svg\";}\r\n        if(daysLeft == 5 || daysLeft == 4 || daysLeft == 3){return \"/assets/custom-ion-icons/progress1.svg\";}\r\n        if(daysLeft == 2 || daysLeft == 1 || daysLeft == 0){return \"/assets/custom-ion-icons/progress0.svg\";}\r\n      }\r\n      if(duration==28){\r\n        if(daysLeft == 27 || daysLeft == 26 || daysLeft == 25 || daysLeft == 24){return \"/assets/custom-ion-icons/progress6.svg\";}\r\n        if(daysLeft == 23 || daysLeft == 22 || daysLeft == 21 || daysLeft == 20){return \"/assets/custom-ion-icons/progress5.svg\";}\r\n        if(daysLeft == 19 || daysLeft == 18 || daysLeft == 17 || daysLeft == 16){return \"/assets/custom-ion-icons/progress4.svg\";}\r\n        if(daysLeft == 15 || daysLeft == 14 || daysLeft == 13 || daysLeft == 12){return \"/assets/custom-ion-icons/progress3.svg\";}\r\n        if(daysLeft == 11 || daysLeft == 10 || daysLeft == 9 || daysLeft == 8){return \"/assets/custom-ion-icons/progress2.svg\";}\r\n        if(daysLeft == 7 || daysLeft == 6 || daysLeft == 5 || daysLeft == 4){return \"/assets/custom-ion-icons/progress1.svg\";}\r\n        if(daysLeft == 3 || daysLeft == 2 || daysLeft == 1 || daysLeft == 0){return \"/assets/custom-ion-icons/progress0.svg\";}\r\n      }\r\n    }\r\n\r\n    completeHabit(item){\r\n      let goalAchieved = false;\r\n      this.db.doc(`users/${this.uid}/ongoingHabits/${item.id}`).delete();\r\n      let id = item.id;\r\n      this.db.doc(`users/${this.uid}/finishedHabits/${id}`).set(item);\r\n      if(item.successDays >= item.goal){\r\n        goalAchieved = true;\r\n      }\r\n      let goalCounter;\r\n      if(goalAchieved){\r\n        goalCounter = 1;\r\n      }\r\n      else{goalCounter = 0}\r\n      const increment = firebase.firestore.FieldValue.increment(1);\r\n      const counterRef = this.db.collection('users').doc(`${this.uid}`).collection('counters').doc('counter'); \r\n      this.db.collection('users').doc(`${this.uid}`).collection('counters').doc('counter').ref.get().then((documentSnapshot) => {\r\n        if(!documentSnapshot.exists){\r\n          counterRef.set(\r\n          { taskCounter: 0,\r\n            habitCounter: 1,\r\n            goalCounter: goalCounter\r\n          });\r\n        }\r\n        else{\r\n          if(goalAchieved){\r\n            counterRef.update(\r\n              { habitCounter: increment,\r\n                goalCounter: increment\r\n              });\r\n          }\r\n          else{\r\n            counterRef.update({ habitCounter: increment });\r\n          }\r\n        }\r\n      });\r\n      delete item.id;\r\n    } \r\n\r\n    onSelect(id, item) {\r\n      this.dataService.setData(id, item);\r\n      this.router.navigateByUrl(`/detail/${id}`);\r\n    }\r\n  }\r\n"]}