{"version":3,"sources":["webpack:///src/app/pages/finishedHabits/finishedHabits.page.html","webpack:///src/app/pages/finishedHabits/finishedHabits-routing.module.ts","webpack:///src/app/pages/finishedHabits/finishedHabits.module.ts","webpack:///src/app/pages/finishedHabits/finishedHabits.page.scss","webpack:///src/app/pages/finishedHabits/finishedHabits.page.ts"],"names":["routes","path","component","FinishedHabitsPageRoutingModule","imports","forChild","exports","FinishedHabitsPageModule","declarations","FinishedHabitsPage","afAuth","db","navCtrl","router","alertCtrl","dataService","items","uid","loading","iconSrc","authState","subscribe","user","collection","ref","query","orderBy","snapshotChanges","colSnap","forEach","a","item","payload","doc","data","id","push","endDate","countEndDate","date","duration","message","days","startDate","Date","setData","navigateByUrl","selector","template"],"mappings":"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","file":"pages-finishedHabits-finishedHabits-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"medium\\\">\\r\\n    <ion-title>zakończone ({{items.length}})</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button menu=\\\"main-menu\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-spinner *ngIf = \\\"loading\\\" color=\\\"success\\\"></ion-spinner>\\r\\n  \\r\\n  <ion-card *ngFor=\\\"let item of items\\\" color={{item.color}}>\\r\\n    <ion-item (click)=\\\"onSelect(item.id, item)\\\" detail=\\\"true\\\" lines=\\\"none\\\">\\r\\n      <ion-label>{{item.name}}</ion-label>   \\r\\n    </ion-item>\\r\\n  \\r\\n    <ion-card-content>\\r\\n      <p class=\\\"desc\\\">{{item.description}}</p>\\r\\n      <p>nawyk trwający {{item.duration}} dni</p>\\r\\n      <p>{{item.message}}</p>\\r\\n    </ion-card-content>\\r\\n\\r\\n        <ion-icon class=\\\"progress-icon\\\" src={{iconSrc}}></ion-icon>\\r\\n\\r\\n  </ion-card>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { FinishedHabitsPage } from './finishedHabits.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FinishedHabitsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class FinishedHabitsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FinishedHabitsPageRoutingModule } from './finishedHabits-routing.module';\r\n\r\nimport { FinishedHabitsPage } from './finishedHabits.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    FinishedHabitsPageRoutingModule\r\n  ],\r\n  declarations: [FinishedHabitsPage]\r\n})\r\nexport class FinishedHabitsPageModule {}\r\n","export default \"ion-spinner {\\n  margin-left: 16px;\\n  margin-top: 16px;\\n}\\n\\nion-card {\\n  padding: 16px;\\n  border-radius: 15px 15px 15px 15px;\\n}\\n\\nion-item {\\n  border-radius: 15px 15px 15px 15px;\\n  opacity: 0.85;\\n  font-size: 18px;\\n}\\n\\np {\\n  font-size: 15px;\\n}\\n\\n.desc {\\n  font-size: 18px;\\n  color: #696969;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZmluaXNoZWRIYWJpdHMvQzpcXFVzZXJzXFxNS1xcRGVza3RvcFxccHJvamVrdFxcSGFiaXRUcmFja2VyL3NyY1xcYXBwXFxwYWdlc1xcZmluaXNoZWRIYWJpdHNcXGZpbmlzaGVkSGFiaXRzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvZmluaXNoZWRIYWJpdHMvZmluaXNoZWRIYWJpdHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQUE7RUFDQSxnQkFBQTtBQ0NKOztBREVFO0VBQ0UsYUFBQTtFQUNBLGtDQUFBO0FDQ0o7O0FERUU7RUFDRSxrQ0FBQTtFQUNBLGFBQUE7RUFDQSxlQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0FDQ0o7O0FERUU7RUFDRSxlQUFBO0VBQ0EsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZmluaXNoZWRIYWJpdHMvZmluaXNoZWRIYWJpdHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXNwaW5uZXIge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDE2cHg7XHJcbiAgICBtYXJnaW4tdG9wOiAxNnB4O1xyXG4gIH1cclxuICBcclxuICBpb24tY2FyZHtcclxuICAgIHBhZGRpbmc6IDE2cHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4IDE1cHggMTVweCAxNXB4O1xyXG4gIH1cclxuICBcclxuICBpb24taXRlbXtcclxuICAgIGJvcmRlci1yYWRpdXM6IDE1cHggMTVweCAxNXB4IDE1cHg7XHJcbiAgICBvcGFjaXR5OiAwLjg1O1xyXG4gICAgZm9udC1zaXplOiAxOHB4O1xyXG4gIH1cclxuICBcclxucHtcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICB9XHJcbiAgXHJcbiAgLmRlc2N7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICBjb2xvcjogIzY5Njk2OTtcclxuICB9IiwiaW9uLXNwaW5uZXIge1xuICBtYXJnaW4tbGVmdDogMTZweDtcbiAgbWFyZ2luLXRvcDogMTZweDtcbn1cblxuaW9uLWNhcmQge1xuICBwYWRkaW5nOiAxNnB4O1xuICBib3JkZXItcmFkaXVzOiAxNXB4IDE1cHggMTVweCAxNXB4O1xufVxuXG5pb24taXRlbSB7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHggMTVweCAxNXB4IDE1cHg7XG4gIG9wYWNpdHk6IDAuODU7XG4gIGZvbnQtc2l6ZTogMThweDtcbn1cblxucCB7XG4gIGZvbnQtc2l6ZTogMTVweDtcbn1cblxuLmRlc2Mge1xuICBmb250LXNpemU6IDE4cHg7XG4gIGNvbG9yOiAjNjk2OTY5O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AlertController, ModalController } from '@ionic/angular';\r\nimport { NavController } from '@ionic/angular';\r\nimport { DataService } from '../../data.service';\r\nimport { Router } from '@angular/router';\r\nimport { addDays, format } from 'date-fns';\r\n\r\n@Component({\r\n  selector: 'app-finishedHabits',\r\n  templateUrl: './finishedHabits.page.html',\r\n  styleUrls: ['./finishedHabits.page.scss'],\r\n})\r\nexport class FinishedHabitsPage implements OnInit {\r\n  items = [];\r\n  uid = {};\r\n  loading = true;\r\n  iconSrc = \"/assets/custom-ion-icons/progress0.svg\";\r\n\r\n  constructor(private afAuth: AngularFireAuth, private db: AngularFirestore, public navCtrl: NavController, private router: Router,\r\n    private alertCtrl: AlertController, private dataService: DataService) {\r\n      this.afAuth.authState.subscribe(user => {\r\n        if (user)\r\n          this.uid = user.uid;\r\n      });\r\n      this.afAuth.authState.subscribe(user => {\r\n        if (!user)\r\n          return;\r\n        this.db.collection(`users/${this.uid}/finishedHabits`, ref => {\r\n          let query = ref.orderBy('created');\r\n          return query;\r\n        }).snapshotChanges().subscribe(colSnap => {\r\n          this.items = [];\r\n          colSnap.forEach(a => {\r\n            let item = a.payload.doc.data();\r\n            item['id'] = a.payload.doc.id;\r\n            this.items.push(item);\r\n          });\r\n          this.loading = false;\r\n          for(let item of this.items){\r\n            item.endDate = this.countEndDate(item.date, item.duration);\r\n            item.message = `nawyk zakończył się ${item.endDate}`;\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  countEndDate(date, days){\r\n    let startDate = new Date(date);\r\n    let endDate = addDays(startDate, (days-1));\r\n    return format(endDate, 'dd/MM/yyyy');\r\n  }\r\n\r\n  onSelect(id, item) {\r\n    this.dataService.setData(id, item);\r\n    this.router.navigateByUrl(`/finished-detail/${id}`);\r\n  }\r\n\r\n}\r\n\r\n"]}